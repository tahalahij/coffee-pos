
# Dual-Screen Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WINDOWS LAPTOP (Extended Display)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚                                      â”‚
â”‚    PRIMARY MONITOR (Laptop)     â”‚    SECONDARY MONITOR (HDMI TV)      â”‚
â”‚                                 â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   OPERATOR WINDOW         â”‚  â”‚  â”‚    DISPLAY WINDOW             â”‚  â”‚
â”‚  â”‚   (Resizable, Decorated)  â”‚  â”‚  â”‚    (Fullscreen, No Decor)     â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”  Cafe POS - Operatorâ”‚  â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚ â”‚ Ã— â”‚                      â”‚  â”‚  â”‚     Welcome to Our CafÃ©       â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”˜  [Display: ğŸŸ¢ ON ]  â”‚  â”‚  â”‚   Fresh Coffee & Treats       â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚ â”‚POSâ”‚Salesâ”‚Productsâ”‚Cust. â”‚  â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚   â”‚  Your Order            â”‚   â”‚  â”‚
â”‚  â”‚                            â”‚  â”‚  â”‚   â”‚  2x Coffee    $7.00    â”‚   â”‚  â”‚
â”‚  â”‚  [Product Grid]            â”‚  â”‚  â”‚   â”‚  1x Muffin    $3.50    â”‚   â”‚  â”‚
â”‚  â”‚  â˜• ğŸ° ğŸ¥ ğŸ¥—              â”‚  â”‚  â”‚   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚   â”‚  â”‚
â”‚  â”‚                            â”‚  â”‚  â”‚   â”‚  Total:      $10.50    â”‚   â”‚  â”‚
â”‚  â”‚  Cart:                     â”‚  â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚  - Coffee x2  $7.00        â”‚  â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚  - Muffin x1  $3.50        â”‚  â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚  Total: $10.50             â”‚  â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚  [Complete Sale] [Clear]   â”‚  â”‚  â”‚                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         localhost:3000/operator  â”‚       localhost:3000/display        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â–²                              â–²
                    â”‚                              â”‚
                    â”‚    Socket.IO WebSocket       â”‚
                    â”‚    (Real-time Updates)       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   NESTJS BACKEND SERVER     â”‚
                    â”‚   Port 3001                 â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚  DisplayGateway             â”‚
                    â”‚  - Manages connections      â”‚
                    â”‚  - Broadcasts cart updates  â”‚
                    â”‚  - Handles events           â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚  REST API                   â”‚
                    â”‚  GET  /display/status       â”‚
                    â”‚  POST /display/cart         â”‚
                    â”‚  POST /display/sale-completeâ”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚  MongoDB (Port 27017)       â”‚
                    â”‚  - Products                 â”‚
                    â”‚  - Sales                    â”‚
                    â”‚  - Customers                â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PROCESS FLOW:

1. USER ACTION: Cashier adds item in Operator Window
   
2. STATE UPDATE: React zustand store updates cart
   
3. WEBSOCKET EMIT: useDisplaySync hook sends message
   
   Message: {
     type: "CART_UPDATE",
     payload: {
       items: [...],
       total: 10.50,
       itemCount: 3
     }
   }
   
4. BACKEND RECEIVES: DisplayGateway processes message
   
5. BACKEND BROADCASTS: Gateway emits to all connected clients
   
6. DISPLAY RECEIVES: Display window's socket listener triggered
   
7. UI UPDATE: Display window re-renders with new cart data
   
   âš¡ Total time: <50ms (local network)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

WINDOW CREATION (Tauri Rust):

fn main() {
    tauri::Builder::default()
        .setup(|app| {
            // 1. Start MongoDB
            start_mongodb()?;
            
            // 2. Start NestJS backend
            start_backend()?;
            
            // 3. Create operator window (defined in tauri.conf.json)
            //    Opens on primary monitor
            
            // 4. Create display window programmatically
            create_display_window(app)?;
            //    - Detects monitors
            //    - Positions on second monitor if available
            //    - Sets fullscreen
            //    - No decorations
            
            Ok(())
        })
        .run()?;
}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

MONITOR DETECTION LOGIC:

let monitors = app.available_monitors()?;

if monitors.len() >= 2 {
    // USE SECOND MONITOR
    let second = &monitors[1];
    position = second.position();
    size = second.size();
    fullscreen = true;
} else {
    // FALLBACK (Manual positioning)
    position = (100, 100);
    size = (1920, 1080);
    fullscreen = false;
}

WindowBuilder::new(app, "display", "/display")
    .position(position.x, position.y)
    .inner_size(size.width, size.height)
    .fullscreen(fullscreen)
    .decorations(false)
    .build()?;

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FILE STRUCTURE:

cafe-pos/
â”œâ”€â”€ backend/
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ app.module.ts              [+] Import DisplayModule
â”‚       â””â”€â”€ display/                   [NEW]
â”‚           â”œâ”€â”€ display.gateway.ts     [NEW] WebSocket handler
â”‚           â”œâ”€â”€ display.module.ts      [NEW] Module def
â”‚           â””â”€â”€ display.controller.ts  [NEW] REST endpoints
â”‚
â”œâ”€â”€ frontend/
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ app/
â”‚       â”‚   â”œâ”€â”€ operator/              [NEW]
â”‚       â”‚   â”‚   â””â”€â”€ page.tsx           [NEW] Cashier UI
â”‚       â”‚   â””â”€â”€ display/               [NEW]
â”‚       â”‚       â””â”€â”€ page.tsx           [NEW] Customer UI
â”‚       â””â”€â”€ hooks/
â”‚           â””â”€â”€ use-display-sync.ts    [NEW] WebSocket client
â”‚
â”œâ”€â”€ desktop/
â”‚   â””â”€â”€ src-tauri/
â”‚       â”œâ”€â”€ tauri.conf.json            [MODIFIED] Window config
â”‚       â””â”€â”€ src/
â”‚           â””â”€â”€ main.rs                [MODIFIED] Dual window logic
â”‚
â”œâ”€â”€ DUAL-SCREEN-SETUP.md               [NEW] Full documentation
â”œâ”€â”€ DUAL-SCREEN-QUICK-START.md         [NEW] Quick guide
â”œâ”€â”€ IMPLEMENTATION-DUAL-SCREEN.md      [NEW] Summary
â”œâ”€â”€ setup-dual-screen.sh               [NEW] Unix installer
â””â”€â”€ setup-dual-screen.bat              [NEW] Windows installer

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DEPENDENCIES:

Backend:
  - @nestjs/websockets
  - @nestjs/platform-socket.io
  - socket.io

Frontend:
  - socket.io-client
  - framer-motion

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```
